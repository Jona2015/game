<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Slither Advanced</title>
<style>
body{margin:0;overflow:hidden;background:#111;color:white;font-family:Arial}
canvas{display:block}
#menu{
position:fixed;top:50%;left:50%;
transform:translate(-50%,-50%);
background:#222e;padding:20px;border-radius:12px;
text-align:center;width:260px
}
select,input,button{width:90%;margin:5px;padding:6px}
#leaderboard{
position:fixed;left:10px;top:10px;
background:#000a;padding:10px;border-radius:8px
}
#minimap{
position:fixed;right:10px;top:10px;
width:180px;height:180px;background:#000a;border:2px solid #555
}
</style>
</head>
<body>

<div id="menu">
<h2>SLITHER</h2>
<input id="name" placeholder="Name" value="Player">
<select id="skin">
<option value="lime">Gr√ºn</option>
<option value="cyan">Cyan</option>
<option value="yellow">Gelb</option>
<option value="pink">Pink</option>
</select>
<select id="difficulty">
<option value="0.8">Easy</option>
<option value="1">Normal</option>
<option value="1.3">Hard</option>
</select>
<button onclick="startGame()">START</button>
</div>

<div id="leaderboard"></div>
<canvas id="game"></canvas>
<canvas id="minimap"></canvas>

<script>
const canvas=document.getElementById("game"),ctx=canvas.getContext("2d")
const mini=document.getElementById("minimap"),mctx=mini.getContext("2d")
canvas.width=innerWidth;canvas.height=innerHeight
mini.width=mini.height=180

const WORLD=5000
let zoom=0.35
let running=false

const rand=(a,b)=>Math.random()*(b-a)+a
const dist=(a,b)=>Math.hypot(a.x-b.x,a.y-b.y)

let camera={x:0,y:0}
let mouse={x:0,y:0}
addEventListener("mousemove",e=>{mouse.x=e.clientX;mouse.y=e.clientY})

class Snake{
constructor(x,y,color,isBot=false){
this.segments=[{x,y}]
this.len=25
this.width=6
this.speed=4
this.angle=0
this.color=color
this.dead=false
this.isBot=isBot
this.name=isBot?"Bot"+Math.floor(rand(1,999)):""
}
update(target){
if(this.dead)return
if(target)this.angle=Math.atan2(target.y-this.segments[0].y,target.x-this.segments[0].x)
const h=this.segments[0]
this.segments.unshift({
x:h.x+Math.cos(this.angle)*this.speed,
y:h.y+Math.sin(this.angle)*this.speed
})
while(this.segments.length>this.len)this.segments.pop()
}
draw(){
ctx.fillStyle=this.color
for(const s of this.segments){
ctx.beginPath()
ctx.arc(s.x,s.y,this.width,0,Math.PI*2)
ctx.fill()
}
}
}

let player
const bots=[]
const foods=[]

function startGame(){
document.getElementById("menu").style.display="none"
running=true

player=new Snake(0,0,document.getElementById("skin").value)
player.name=document.getElementById("name").value||"Player"
player.speed*=document.getElementById("difficulty").value

bots.length=0
for(let i=0;i<35;i++){
let b=new Snake(rand(-WORLD,WORLD),rand(-WORLD,WORLD),"red",true)
b.len=rand(20,120)
bots.push(b)
}

foods.length=0
for(let i=0;i<20000;i++)
foods.push({x:rand(-WORLD,WORLD),y:rand(-WORLD,WORLD)})
}

function loop(){
if(!running)return
ctx.setTransform(1,0,0,1,0,0)
ctx.clearRect(0,0,canvas.width,canvas.height)

camera.x+=(player.segments[0].x-camera.x)*0.1
camera.y+=(player.segments[0].y-camera.y)*0.1

ctx.translate(canvas.width/2,canvas.height/2)
ctx.scale(zoom,zoom)
ctx.translate(-camera.x,-camera.y)

ctx.fillStyle="orange"
for(const f of foods){
ctx.beginPath()
ctx.arc(f.x,f.y,4,0,Math.PI*2)
ctx.fill()
if(dist(player.segments[0],f)<10){
player.len+=1
player.width+=0.01
foods.splice(foods.indexOf(f),1)
}
}

player.update({
x:camera.x+(mouse.x-canvas.width/2)/zoom,
y:camera.y+(mouse.y-canvas.height/2)/zoom
})

bots.forEach(b=>{
let t=dist(b.segments[0],player.segments[0])<800?player.segments[0]:foods[Math.floor(Math.random()*foods.length)]
b.update(t)
})

bots.forEach(b=>{
if(b.dead)return

for(let i=15;i<player.segments.length;i++){
if(dist(b.segments[0],player.segments[i])<b.width){
b.dead=true
b.segments.forEach(s=>foods.push({x:s.x,y:s.y}))
}
}

for(let i=15;i<b.segments.length;i++){
if(dist(player.segments[0],b.segments[i])<player.width){
alert("Du bist gestorben!")
location.reload()
}
}
})

player.draw()
bots.forEach(b=>!b.dead&&b.draw())

drawUI()
drawMiniMap()
requestAnimationFrame(loop)
}

function drawUI(){
const lb=[player,...bots.filter(b=>!b.dead)]
.sort((a,b)=>b.len-a.len).slice(0,5)
document.getElementById("leaderboard").innerHTML=
"<b>üåê Online</b><br>"+lb.map(s=>`${s.name}: ${Math.floor(s.len)}`).join("<br>")
}

function drawMiniMap(){
mctx.clearRect(0,0,mini.width,mini.height)
const scale=mini.width/(WORLD*2)
mctx.fillStyle="lime"
mctx.fillRect(mini.width/2+player.segments[0].x*scale,mini.height/2+player.segments[0].y*scale,3,3)
bots.forEach(b=>{
mctx.fillStyle="red"
mctx.fillRect(mini.width/2+b.segments[0].x*scale,mini.height/2+b.segments[0].y*scale,3,3)
})
}

loop()
</script>
</body>
</html>
